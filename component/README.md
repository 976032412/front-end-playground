从简单的模块化到组件化
=======================


用代码来总结从简单模块化到组件化的一个过程，*全部代码详见目录`./code/`*

###1. 最初的阶段：简单的分模块，页面级别

*代码参见 `./code/v1.0/`*

在这个阶段，是典型的MVC模式，而View层基本就是按照页面来切分模块，例如`v1.0.js`中就分为 `首页 indexPage`，`新闻页 newsPage`，`详情页 detailPage` 3个模块。

####存在较为明显的问题:

**1. 界面层的逻辑主要集中在模板中**

查看`render`函数，基本没有什么操作，主要交给模板进行处理，这样的导致模板有着太多的业务逻辑.
```
render: function (data) {
    var $el = _.template(pageTpl, data);
    $('#container').append($el);
}
```

**2. 代码冗余**

例子中的页面较少，难以提现。但是我们可以想象一下，随着项目越变越大，页面越来越多，每一个页面都会有一些相同的动作，例如`初始化init`,`渲染render`,`更新update`,`销毁destroy`等等

容易犯的错误就是简单的**copy and paste**, 这个错误在接触到的前端项目中见过太多次了。

**3. 代码维护难 **

仅仅看`v1.0`的代码，暂时是比较一致的，但是这种一致是通过约定来达到的，而约定在团队开发中往往是无法保证代码质量的, 因为开发人员质量参差不齐，编码习惯不同等原因导致很难达到同一个水平（函数名命名，各种最佳实践）。所以如果可以有一个框架来进行约束，尽可能的去统一大家的水准，这对于提高代码质量是非常有好处的，而且有相同标准的模块也可以降低代码的学习成本，因为每一个模块都是类似的，只要读懂了一个模块，其他都是容易读懂的。例如采用`Backbone`



###2. 阶段2: 增加框架上的限制，继承体系，并合理抽象模块

*代码参见 `./code/v1.1/`*

在这个版本中，通过引入了继承体系，通过创建一个基类来确定共有的接口`render`, `init`, `uiEvents`等，子类继承基类来扩展。这样子解决了两个问题
- 代码冗余
- 代码维护难

解决了这两个问题之后就剩下抽象粒度过粗的问题。合理的细粒度抽象有助于组件的复用。进而提高系统的可维护性和开发速度。

目前只有`页面 Page` 这一个对象，如果继续分析，还可以抽象出 `新闻 News` 和 `列表 List`两个对象



